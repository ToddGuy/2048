(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports={FrontTile:"FrontTile_FrontTile__1_83O",InnerNew:"FrontTile_InnerNew__313S_",newtile:"FrontTile_newtile__AuNRp",InnerExisting:"FrontTile_InnerExisting__1EmHF",Inner:"FrontTile_Inner__32For",MergedTile:"FrontTile_MergedTile__1dgK7",mergedtile:"FrontTile_mergedtile__2ldEU"}},,function(e,t,n){e.exports={RestartDialog:"RestartDialog_RestartDialog__1rGPE",Dialog:"RestartDialog_Dialog__2vZ24",Button:"RestartDialog_Button__29jkV"}},,function(e,t,n){e.exports={Game:"Game_Game__A4Dlu",Header:"Game_Header__mTTnI",Horizontal:"Game_Horizontal__2z2cd"}},function(e,t,n){e.exports={Backdrop:"Backdrop_Backdrop__3unn9",BackdropIn:"Backdrop_BackdropIn__35szg","backdrop-in":"Backdrop_backdrop-in__1Ir-q",BackdropOut:"Backdrop_BackdropOut__1aRcp","backdrop-out":"Backdrop_backdrop-out__3Uj-l"}},function(e,t,n){e.exports={Points:"Points_Points__dnNkz",Text:"Points_Text__3kB3L",Numbers:"Points_Numbers__2vVaL"}},,,,function(e,t,n){e.exports={BackTiles:"BackTiles_BackTiles__1zhYB",BackTile:"BackTiles_BackTile__-n1xB"}},,,,,,function(e,t,n){e.exports={Layout:"Layout_Layout__13tUo"}},function(e,t,n){e.exports={GameBoard:"GameBoard_GameBoard__2AaFH"}},function(e,t,n){e.exports={FrontTiles:"FrontTiles_FrontTiles__2bDs-"}},function(e,t,n){e.exports={GameOver:"GameOver_GameOver__14HwU"}},function(e,t,n){e.exports={Button:"Button_Button__rfs8M"}},function(e,t,n){e.exports=n(44)},,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),i=n.n(o),c=n(4),s=n(14),l=n(5),u=n(2),d=n(1);function f(){var e=0,t=0,n={};this.push=function(e){n[t++]=e},this.pop=function(){if(0!==this.getLength()){var t=n[e];return delete n[e],e++,t}},this.peek=function(){return n[e]},this.getLength=function(){return t-e},this.isEmpty=function(){return 0===this.getLength()}}var v=function(e,t,n){return Math.floor((void 0===n?Math.random():n)*(t-e))+e},m=function(e,t){return Object(u.a)(Array(t-e).keys()).map(function(t,n){return n+e})},p={left:37,up:38,right:39,down:40};function h(e){var t=Array(10).fill(2);return t[4]=4,t[v(0,t.length,e)]}function g(e,t,n){return Object(d.a)({},e,{xAxisPos:n.xAxisPos,yAxisPos:n.yAxisPos,filled:!0,isNew:!1,isMerged:!1,filledPtr:t})}function b(e,t){return Object(d.a)({},e,{filledPtr:-1,xAxisPos:t.xAxisPos,yAxisPos:t.yAxisPos,remove:!0,filled:!1})}var k={filled:!1,isNew:!1,isMerged:!1,value:-1,filledPtr:-1};function _(e,t,n,r){return Object(d.a)({},e,{key:r,filled:!0,isNew:!0,isMerged:!1,filledPtr:t,value:n})}var O=function(e,t){var n,r,a,o,i,c,s=!1,l=p.up,u=p.left,d=p.down,f=p.right;switch(t){case l:s=!0;case u:n=function(e){return e>-1},r=function(e){return e>0},a=function(e){return--e},o=3,i=3,c=function(t,n){return s?{tile:e[n][t],nextTile:e[n-1][t]}:{tile:e[t][n],nextTile:e[t][n-1]}};break;case d:s=!0;case f:n=function(e){return e<4},r=function(e){return e<3},a=function(e){return++e},o=0,i=0,c=function(t,n){return s?{tile:e[n][t],nextTile:e[n+1][t]}:{tile:e[t][n],nextTile:e[t][n+1]}};break;default:return!1}for(var v=o;n(v);v=a(v))for(var m=i;r(m);m=a(m)){var h=c(v,m),g=h.tile,b=h.nextTile;if(g.filled&&(!b.filled||g.value===b.value))return!0}return!1};function y(e){return e.num++}var E={colorArr:function(){var e=Array(10),t="#ffffff";return e[1]={background:"#ece4d9",color:"#776e65"},e[2]={background:"#ede0c8",color:"#776e65"},e[3]={background:"#f2b179",color:t},e[4]={background:"#f59563",color:t},e[5]={background:"#f67c5f",color:t},e[6]={background:"#f65e3b",color:t},e[7]={background:"#eddb75",color:t},e[8]={background:"#edcf72",color:t},e[9]={background:"#edcf59",color:t},e[10]={background:"#b0ed8f",color:t},e[11]={background:"#75c352",color:t},e[12]={background:"#52a026",color:t},e[13]={background:"#79faff",color:t},e[14]={background:"#6de3f8",color:t},e[15]={background:"#64d4ee",color:t},e[16]={background:"#ee93ee",color:t},e[17]={background:"#df84e5",color:t},e[18]={background:"#c26be2",color:t},e}(),getColor:function(e){var t=this.colorArr[Math.log2(e)];return void 0===t?{background:"#83E1EC",color:"white"}:t}},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.tiles=function(){for(var e=[],t=5,n=0;n<4;n++){var r=5,a=[];e.push(a);for(var o=0;o<4;o++){var i={yAxisPos:t,xAxisPos:r,filled:!1,value:-1};r+=85,a.push(i)}t+=85}return e}(),this.filledTiles=[],this.moving=!1,this.gameOver=!1,this.points=0,this.lastMove={used:!0},this.key={num:e},this.saveGame=!1};var w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SWIPE_TILES":return Object(d.a)({},e,function(e,t){var n,r,a,o=t.payload,i=o.direction,c=o.randomLocation,s=o.twoOrFour,m=e,h=e.tiles,E=e.points,T=Object(u.a)(e.filledTiles),w=Object(d.a)({},e.key),x=!1,j=p.up,N=p.left,L=p.down,M=p.right;switch(i){case j:x=!0;case N:n=function(e){return e<4},r=function(e){return++e},a=0;break;case L:x=!0;case M:n=function(e){return e>-1},r=function(e){return--e},a=3}for(var P=function(e,t){return x?h[t][e]:h[e][t]},B=function(e,t){return x?[t,e]:[e,t]},I=x?[[],[],[],[]]:[],A=[],R=T.length,S=new f,G=0;G<4;G++){for(var C=[],D=a,F=D;n(D);){var H=P(G,D);if(H.filled){S.push(H);var V=P(G,F);if(2===S.getLength()){var z=S.pop(),U=Object(d.a)({},z,{isNew:!1,isMerged:!1});if(z.value===S.peek().value){var Y=S.pop();U=Object(d.a)({},U,{value:2*z.value,filled:!0,isMerged:!0,isNew:!1,key:y(w),xAxisPos:V.xAxisPos,yAxisPos:V.yAxisPos,filledPtr:T.length}),T.push(U),T[Y.filledPtr]=b(T[Y.filledPtr],U),T[z.filledPtr]=b(T[z.filledPtr],U),R--,E+=U.value}else{var J=U.filledPtr;T[J]=g(T[J],J,V),U=T[J]}C[F]=U,F=r(F)}}D=r(D)}if(!S.isEmpty()){var W=S.pop().filledPtr,X=P(G,F);T[W]=g(T[W],W,X),C[F]=T[W],F=r(F)}for(;n(F);){var K=P(G,F),q=B(G,F),Z=Object(l.a)(q,2),$=Z[0],Q=Z[1],ee=Object(d.a)({},Object(d.a)({},k),{yAxisPos:K.yAxisPos,xAxisPos:K.xAxisPos,row:$,col:Q});C[F]=ee,A.push(ee),F=r(F)}if(x)for(var te=0;te<4;te++)I[te].push(C[te]);else I.push(C)}var ne=!1;if(R<16){var re=A[v(0,A.length,c)],ae=_(re,T.length,s,y(w));I[re.row][re.col]=ae,delete re.row,delete re.col,T.push(ae),R++}if(16===R){ne=!0;for(var oe=Object.values(p),ie=0;ne&&ie<oe.length;)O(I,oe[ie])&&(ne=!1),ie++}return{tiles:I,filledTiles:T,gameOver:ne,points:E,lastMove:m,key:w,saveGame:!0}}(e,t),{move:!0});case"START_MOVING":return Object(d.a)({},e,{moving:!0});case"STOP_MOVING":return Object(d.a)({},e,function(e){var t=e.filledTiles.filter(function(e){return!e.remove});if(e.lastMove.filledTiles&&e.lastMove.filledTiles.forEach(function(e){e.isNew=!1}),t.length===e.filledTiles.length)return e;var n=e.tiles;return t.forEach(function(e,t){e.filledPtr=t,e.isMerged=!1}),{tiles:n,filledTiles:t,lastMove:Object(d.a)({},e.lastMove,{used:!1})}}(e),{moving:!1});case"INIT_TILES":return t.payload.shouldRestart&&(e=new T(e.key.num)),Object(d.a)({},e,function(e,t){var n=t.payload,r=n.rowRand0,a=n.colRand0,o=n.rowRand1,i=n.colRand1,c=n.twoOrFour0,s=n.twoOrFour1,l=e.tiles,f=[],p=Object(d.a)({},e.key),h=Object(u.a)(Array(4)).map(function(){return m(0,4)}),g=v(0,h.length,r),b=h[g][v(0,h[g].length,a)];return l[g][b]=_(l[g][b],0,c,y(p)),f.push(l[g][b]),h[g].splice(b,1),b=h[g=v(0,h.length,o)][v(0,h[g].length,i)],l[g][b]=_(l[g][b],1,s,y(p)),f.push(l[g][b]),{tiles:l,filledTiles:f,key:p}}(e,t));case"UNDO_MOVE":return function(e){return e.lastMove.used?e:Object(d.a)({},e.lastMove,{lastMove:{used:!0}})}(e);default:return e}},x=n(28),j=Object(s.c)(w,function(){if(window.localStorage.getItem("saveGame")){var e=window.localStorage.getItem("reduxState");return JSON.parse(e)}}(),Object(s.a)(x.a));j.subscribe(function(){var e=j.getState();window.localStorage.setItem("reduxState",JSON.stringify(e)),window.localStorage.setItem("saveGame",e.saveGame)});var N=j,L=(n(43),n(8)),M=n(9),P=n(11),B=n(10),I=n(12),A=n(29),R=n.n(A),S=n(6),G=n(17),C=n.n(G),D=n(30),F=n.n(D),H=n(23),V=n.n(H),z=function(e){return a.a.createElement("div",{className:V.a.BackTiles},Object(u.a)(Array(16).keys()).map(function(e,t){return a.a.createElement("div",{key:t,className:V.a.BackTile})}))},U=n(13),Y=n.n(U),J=function(e){function t(){return Object(L.a)(this,t),Object(P.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=[Y.a.Inner,this.props.isNew?Y.a.InnerNew:Y.a.InnerExisting];this.props.isMerged&&e.push(Y.a.MergedTile);var t=String(this.props.children).length,n=Object(d.a)({},E.getColor(this.props.children));if(t>3){var r=28-4*(t-4);n.fontSize="".concat(r,"px")}return a.a.createElement("div",{className:Y.a.FrontTile,style:this.props.style},a.a.createElement("div",{className:e.join(" "),style:n},this.props.children))}}]),t}(a.a.Component),W=n(31),X=n.n(W),K=Object(c.b)(function(e){return{filledTiles:e.filledTiles}})(function(e){var t=e.filledTiles;return a.a.createElement("div",{className:X.a.FrontTiles},t.map(function(e){return a.a.createElement(J,{isMerged:e.isMerged,isNew:e.isNew,style:{transform:"translateX(".concat(e.xAxisPos,"px) translateY(").concat(e.yAxisPos,"px)")},key:e.key},e.value)}))}),q=function(e){return e.children},Z=function(e){return a.a.createElement("div",{className:F.a.GameBoard},e.children,a.a.createElement(q,null,a.a.createElement(z,null),a.a.createElement(K,null)))},$=n(32),Q=n.n($),ee=function(){return a.a.createElement("div",{className:Q.a.GameOver},"Game Over")},te=n(18),ne=n.n(te),re=function(e){return a.a.createElement("div",{className:[ne.a.Backdrop,e.init?"":e.display?ne.a.BackdropIn:ne.a.BackdropOut].join(" ")},e.children)},ae=n(15),oe=n.n(ae),ie=function(e){var t=e.clicked,n=function(e){return function(){return t(e)}};return a.a.createElement("div",{className:oe.a.RestartDialog},a.a.createElement("span",{className:oe.a.Dialog},"Restart Game?"),a.a.createElement("div",null,a.a.createElement("button",{className:oe.a.Button,onClick:n(!0),onTouchStart:n(!0)},"YES"),a.a.createElement("button",{className:oe.a.Button,onClick:n(!1),onTouchStart:n(!1)},"NO")))},ce=n(19),se=n.n(ce),le=Object(c.b)(function(e){return{points:e.points}})(function(e){return a.a.createElement("div",{className:se.a.Points},a.a.createElement("div",{className:se.a.Text},"Score:")," ",a.a.createElement("div",{className:se.a.Numbers},e.points))}),ue=n(24),de=n(33),fe=n.n(de),ve=function(e){return a.a.createElement("button",{className:fe.a.Button,onClick:e.onClick,onTouchStart:e.onClick},e.children)},me=function(e){function t(e){var n;return Object(L.a)(this,t),(n=Object(P.a)(this,Object(B.a)(t).call(this,e))).state={restartDialog:!1},n.playable=!0,n.directionKeyCodes=m(37,41).reduce(function(e,t){return e[t]=!0,e},{}),n.removeListenerCallbackList=[],n.directionHandler=n.directionHandler.bind(Object(S.a)(n)),n.showRestartDialog=n.showRestartDialog.bind(Object(S.a)(n)),n.restartClicked=n.restartClicked.bind(Object(S.a)(n)),n.undoMove=n.undoMove.bind(Object(S.a)(n)),n}return Object(I.a)(t,e),Object(M.a)(t,[{key:"directionHandler",value:function(e){this.playable&&this.directionKeyCodes[e.keyCode]&&this.props.swipeTiles(e.keyCode,this.generateRands())}},{key:"moveHandler",value:function(e,t,n){if(this.playable){var r=Object(l.a)(e,2),a=r[0],o=r[1],i=void 0===n.touches?[n.clientX,n.clientY]:[n.touches[0].clientX,n.touches[0].clientY],c=Object(l.a)(i,2),s=c[0],u=c[1];Math.abs(s-a)>Math.abs(u-o)?s<a-30?(this.props.swipeTiles(p.left,this.generateRands()),t()):s>a+30&&(this.props.swipeTiles(p.right,this.generateRands()),t()):u<o-30?(this.props.swipeTiles(p.up,this.generateRands()),t()):u>o+30&&(this.props.swipeTiles(p.down,this.generateRands()),t())}}},{key:"componentDidMount",value:function(){var e=this;JSON.parse(window.localStorage.getItem("saveGame"))||this.props.initTiles(this.getRands()),document.addEventListener("keydown",this.directionHandler),this.removeListenerCallbackList.push(function(){return document.removeEventListener("keydown",e.directionHandler)});var t=function(t){var n=e.moveHandler.bind(e,[t.touches[0].clientX,t.touches[0].clientY],function(){document.removeEventListener("touchmove",n),document.removeEventListener("touchend",r)}),r=function e(){document.removeEventListener("touchmove",n),document.removeEventListener("touchend",e)};document.addEventListener("touchmove",n),document.addEventListener("touchend",r)};document.addEventListener("touchstart",t),this.removeListenerCallbackList.push(function(){return document.removeEventListener("touchstart",t)});var n=function(e){e.preventDefault()};document.addEventListener("touchend",n),this.removeListenerCallbackList.push(function(){return document.removeEventListener("touchend",n)});var r=function(t){var n=e.moveHandler.bind(e,[t.clientX,t.clientY],function(){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",r)}),r=function e(){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",e)};document.addEventListener("mousemove",n),document.addEventListener("mouseup",r)};document.addEventListener("mousedown",r),this.removeListenerCallbackList.push(function(){return document.removeEventListener("mousedown",r)})}},{key:"componentWillUnmount",value:function(){this.removeListenerCallbackList.forEach(function(e){return e()})}},{key:"showRestartDialog",value:function(){this.props.gameOver?this.restartClicked(!0):(this.playable=!1,this.setState({restartDialog:!0}))}},{key:"generateRands",value:function(){return Object(u.a)(Array(2)).map(function(){return Math.random()})}},{key:"restartClicked",value:function(e){e&&this.props.initTiles(this.getRands(),!0),this.playable=!0,this.setState({restartDialog:!1})}},{key:"undoMove",value:function(){(this.playable||this.props.gameOver)&&this.props.undoMove()}},{key:"getRands",value:function(){return Object(u.a)(Array(6)).map(function(){return Math.random()})}},{key:"render",value:function(){return a.a.createElement("div",{className:C.a.Game},a.a.createElement("div",{className:C.a.Header},"2048"),a.a.createElement("div",{className:C.a.Horizontal},a.a.createElement(le,null),a.a.createElement(ve,{onClick:this.undoMove},a.a.createElement(ue.a,null)),a.a.createElement(ve,{onClick:this.showRestartDialog},a.a.createElement(ue.b,null))),a.a.createElement("div",null,a.a.createElement(Z,null,a.a.createElement(q,null,a.a.createElement(re,{display:!this.props.gameOver&&this.state.restartDialog},a.a.createElement(ie,{clicked:this.restartClicked})),a.a.createElement(re,{display:this.props.gameOver},a.a.createElement(ee,null))))))}}]),t}(r.Component),pe=Object(c.b)(function(e){return{gameOver:e.gameOver}},function(e){return{swipeTiles:function(t,n){return e(function(e,t){var n=Object(l.a)(t,2),r=n[0],a=n[1];return function(t,n){var o=n(),i=o.moving,c=o.tiles;i||O(c,e)&&(t({type:"START_MOVING"}),t(function(e,t,n){return{type:"SWIPE_TILES",payload:{direction:e,randomLocation:t,twoOrFour:n}}}(e,r,h(a))),setTimeout(function(){return t({type:"STOP_MOVING"})},100))}}(t,n))},initTiles:function(t,n){return e(function(e,t){var n=Object(l.a)(e,6),r=n[0],a=n[1],o=n[2],i=n[3],c=n[4],s=n[5];return{type:"INIT_TILES",payload:{rowRand0:r,colRand0:a,rowRand1:o,colRand1:i,twoOrFour0:h(c),twoOrFour1:h(s),shouldRestart:t}}}(t,n))},undoMove:function(){return e(function(e,t){t().lastMove.used||(e({type:"START_MOVING"}),e({type:"UNDO_MOVE"}),setTimeout(function(){return e({type:"STOP_MOVING"})},100))})}}})(me),he=function(e){function t(){return Object(L.a)(this,t),Object(P.a)(this,Object(B.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){return a.a.createElement("div",{className:R.a.Layout},a.a.createElement(pe,null))}}]),t}(r.Component);var ge=function(){return a.a.createElement(he,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(a.a.createElement(c.a,{store:N},a.a.createElement(ge,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}],[[34,1,2]]]);
//# sourceMappingURL=main.941128ce.chunk.js.map